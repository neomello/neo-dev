openapi: 3.1.0
info:
  title: NEØ Token & NFT API
  description: API para gerenciar tokens ERC20 e NFTs com integração IPFS
  version: 1.0.0
  contact:
    name: MELLØ // NEØ Protocol
    github: https://github.com/NEO-PROTOCOL
    email: neo@neoprotocol.space

servers:
  - url: http://localhost:3000/api
    description: Local development server
  - url: https://api.neoprotocol.space
    description: Production server

tags:
  - name: tokens
    description: Operações com tokens ERC20
  - name: nfts
    description: Operações com NFTs
  - name: ipfs
    description: Operações com IPFS

paths:
  /tokens/deploy:
    post:
      tags:
        - tokens
      summary: Deploy de novo token ERC20
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenDeployRequest'
      responses:
        '200':
          description: Token deployado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenDeployResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  /tokens/{address}/mint:
    post:
      tags:
        - tokens
      summary: Mint tokens para um endereço
      parameters:
        - name: address
          in: path
          required: true
          schema:
            type: string
            pattern: '^0x[a-fA-F0-9]{40}$'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MintRequest'
      responses:
        '200':
          description: Tokens mintados com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MintResponse'

  /nfts/mint:
    post:
      tags:
        - nfts
      summary: Mint NFT com metadados no IPFS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NFTMintRequest'
      responses:
        '200':
          description: NFT mintado com sucesso
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NFTMintResponse'

  /ipfs/upload:
    post:
      tags:
        - ipfs
      summary: Upload de metadados para IPFS
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IPFSUploadRequest'
      responses:
        '200':
          description: Arquivo enviado para IPFS
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IPFSUploadResponse'

components:
  schemas:
    TokenDeployRequest:
      type: object
      required:
        - name
        - symbol
        - initialSupply
      properties:
        name:
          type: string
          example: NEØ Token
        symbol:
          type: string
          example: NEØ
        initialSupply:
          type: string
          pattern: '^[0-9]+$'
          example: '1000000000000000000000000'
        decimals:
          type: integer
          default: 18
          example: 18

    TokenDeployResponse:
      type: object
      properties:
        success:
          type: boolean
        contractAddress:
          type: string
          example: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb'
        transactionHash:
          type: string
          example: '0x1234567890abcdef...'
        blockNumber:
          type: integer

    MintRequest:
      type: object
      required:
        - to
        - amount
      properties:
        to:
          type: string
          pattern: '^0x[a-fA-F0-9]{40}$'
          example: '0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb'
        amount:
          type: string
          pattern: '^[0-9]+$'
          example: '1000000000000000000'

    MintResponse:
      type: object
      properties:
        success:
          type: boolean
        transactionHash:
          type: string
        blockNumber:
          type: integer

    NFTMintRequest:
      type: object
      required:
        - to
        - metadata
      properties:
        to:
          type: string
          pattern: '^0x[a-fA-F0-9]{40}$'
        metadata:
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            image:
              type: string
            attributes:
              type: array
              items:
                type: object

    NFTMintResponse:
      type: object
      properties:
        success:
          type: boolean
        tokenId:
          type: integer
        contractAddress:
          type: string
        ipfsHash:
          type: string
          example: 'QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG'
        transactionHash:
          type: string

    IPFSUploadRequest:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          description: JSON object to upload to IPFS

    IPFSUploadResponse:
      type: object
      properties:
        success:
          type: boolean
        ipfsHash:
          type: string
          example: 'QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG'
        ipfsUrl:
          type: string
          example: 'ipfs://QmYwAPJzv5CZsnA625s3Xf2nemtYgPpHdWEz79ojWnPbdG'

  responses:
    BadRequest:
      description: Requisição inválida
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string

